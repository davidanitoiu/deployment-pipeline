(this["webpackJsonp@davidanitoiu/deployment-pipeline"]=this["webpackJsonp@davidanitoiu/deployment-pipeline"]||[]).push([[0],{109:function(e,t,n){e.exports=n(166)},11:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return s}));var a=n(12),o=n(13),i=Object(o.b)("pipeline/addNode",(function(e){return{payload:Object(a.a)(Object(a.a)({},e.properties),{},{position:e.position})}})),r=Object(o.b)("pipeline/addLink",(function(e){return{payload:{id:"".concat(e.from,"_").concat(e.to),from:e.from,to:e.to}}})),c=Object(o.b)("pipeline/removeLink",(function(e){return{payload:{id:e}}})),l=Object(o.b)("pipeline/removeNode",(function(e){return{payload:{name:e}}})),p=Object(o.b)("pipeline/setAutoDeploy",(function(e){return{payload:{selectedNodeName:e.selectedNodeName,checked:e.checked}}})),d=Object(o.b)("pipeline/addPipeline",(function(e){return{payload:{title:e}}})),u=Object(o.b)("pipeline/setSelectedPipeline",(function(e){return{payload:{title:e}}})),s=Object(o.b)("pipeline/setNodePosition",(function(e,t){return{payload:{name:e,position:t}}}))},166:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(7),r=n.n(i),c=n(45),l=n(197),p=n(212),d=n(168),u=n(214),s=n(207),f=n(67),m=n(209),b=n(206),y=n(208),j=n(6),O=n(15),v=n(14),h=n(25),g=n(11),k=n(12),E=n(200),C=n(201),P=n(202),I=n(203),D=n(37),w=Object(l.a)((function(e){return{sidebarItem:{cursor:"grab"}}}));var N=function(e){var t=e.title,n=Object(O.b)(),i=Object(O.c)((function(e){return e.environments})),r=Object(O.c)((function(e){return Object(j.find)(e.pipeline.pipelines,{title:t}).chart})),c=Object(a.useContext)(h.PipelineContext).chart,l=w(),p=Object(a.useMemo)((function(){var e=Object(j.map)(c.nodes,(function(e){return e.properties.name})),t=Object(j.map)(i,(function(e){return e.name}));return Object(j.difference)(t,e)}),[c.nodes]);return Object(a.useEffect)((function(){if(Object.keys(c.nodes).length>r.nodes.length){var e=Object(j.map)(c.nodes,(function(e){return e.properties.name})),t=Object(j.map)(r.nodes,(function(e){return e.name})),a=Object(j.difference)(e,t),o=Object(j.find)(c.nodes,(function(e){return e.properties.name===a[0]}));n(Object(g.b)(o))}}),[c.nodes]),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{variant:"overline",align:"center"},"Drag & Drop"),o.a.createElement(E.a,null),o.a.createElement(C.a,null,p.map((function(e,t){return o.a.createElement(P.a,{key:e,className:l.sidebarItem,draggable:!0,onDragStart:function(t){var n=function(e){var t=Object(j.find)(i,(function(t){return t.name===e}));return Object(k.a)(Object(k.a)({},D.c),{},{type:D.c.type,ports:D.c.ports,properties:Object(k.a)({},t)})}(e);t.dataTransfer.setData("react-flow-chart",JSON.stringify(n))}},o.a.createElement(I.a,{primary:e}))}))))},x=n(204),L=n(213);var T=function(){var e=Object(O.b)(),t=Object(a.useContext)(h.PipelineContext),n=t.chart,i=t.chartDispatch,r=n.selected.id,c=n.nodes[r].properties;return o.a.createElement("div",null,o.a.createElement(C.a,null,o.a.createElement(P.a,null,o.a.createElement(I.a,{primary:"Name",secondary:c.name})),o.a.createElement(P.a,null,o.a.createElement(I.a,{primary:"OS",secondary:c.os})),o.a.createElement(P.a,null,o.a.createElement(I.a,{primary:"Kernel",secondary:c.kernel})),o.a.createElement(P.a,null,o.a.createElement(I.a,{primary:"Host",secondary:c.host})),o.a.createElement(P.a,null,o.a.createElement(I.a,{primary:"Auto Deploy"}),o.a.createElement(x.a,null,o.a.createElement(L.a,{edge:"end",onChange:function(t,n){e(Object(g.f)({selectedNodeName:c.name,checked:n})),i(Object(h.setChartProperty)({nodeId:r,name:"autoDeploy",value:n}))},color:"primary",checked:c.autoDeploy,name:c.name,inputProps:{"aria-label":c.name}})))))},R=n(169),W=Object(R.a)((function(e){return{pipelineCard:{color:e.palette.primary.main,display:"flex",justifyContent:"center",alignItems:"center"}}})),S=function(e){var t=e.node,n=W(),a=t.properties.name;return o.a.createElement("div",{className:n.pipelineCard},o.a.createElement(f.a,null,a))},A=Object(l.a)((function(e){return{container:{width:"100%",display:"flex",height:"60vh","& .react-draggable":{minWidth:100,height:50,display:"flex",alignItems:"center",justifyContent:"center"}},sidebar:{width:300,background:e.palette.background.paper,display:"flex",flexDirection:"column",flexShrink:0}}})),F=function(e){var t,n=e.title,i=A(),r=Object(O.b)(),l=Object(O.c)((function(e){return e.pipeline.selectedPipeline})),p=Object(h.usePipeline)(n),d=Object(c.a)(p,3),u=d[0],s=d[1],f=d[2],m=Object(a.useMemo)((function(){return{chart:u,callbacks:s,chartDispatch:f}}),[u,s,f]);return o.a.createElement(h.PipelineContext.Provider,{value:m},o.a.createElement("div",{onMouseEnter:function(){n!==l&&r(Object(g.h)(n))},className:i.container},o.a.createElement(v.FlowChart,{chart:u,callbacks:s,Components:{NodeInner:S},config:{snapToGrid:!0,validateLink:h.validateLink}}),o.a.createElement("div",{className:i.sidebar},"node"===(null===(t=u.selected)||void 0===t?void 0:t.type)?o.a.createElement(T,null):o.a.createElement(N,{title:n}))))},H=Object(l.a)((function(e){return{app:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",minHeight:"100vh",backgroundColor:e.palette.background.paper,padding:e.spacing(5)},input:{display:"flex",alignItems:"center",justifyContent:"space-around"},addButton:{margin:e.spacing(1)},pipelines:{flex:1,width:"90%"}}}));var B=function(){var e=H(),t=Object(O.b)(),n=Object(O.c)((function(e){return e.pipeline})).pipelines,i=Object(a.useState)(""),r=Object(c.a)(i,2),l=r[0],v=r[1],h=function(){(function(e){var t=Object(j.find)(n,{title:e});return!Object(j.isEmpty)(e)&&!t})(l)&&(t(Object(g.c)(l)),v(""))};return o.a.createElement("div",{className:e.app},o.a.createElement("div",{className:e.input},o.a.createElement(p.a,{variant:"outlined",value:l,label:"Enter new pipeline Name",onChange:function(e){var t=e.target;return v(t.value)},onKeyDown:function(e){"Enter"===e.key&&h()}}),o.a.createElement(d.a,{className:e.addButton,onClick:h},o.a.createElement(b.a,null))),o.a.createElement("div",{className:e.pipelines},n.map((function(e){return o.a.createElement(u.a,{key:e.title},o.a.createElement(s.a,{expandIcon:o.a.createElement(y.a,null),"aria-controls":"".concat(Object(j.kebabCase)(e.title),"-content")},o.a.createElement(f.a,{variant:"overline"},e.title)),o.a.createElement(m.a,null,o.a.createElement(F,{title:e.title})))}))))},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var M,U=n(210),_=n(211),G=n(56),V=n(21),$=n(13),q=n(16),z=n(102),Q=Object($.c)({selectedPipeline:"",pipelines:[{title:"Pipeline",chart:{links:[{id:"Dev_Test",from:"Dev",to:"Test"}],nodes:[{name:"Dev",os:"RHEL 7.6",kernel:"3.10.0-957",host:"CTRDFLWC",autoDeploy:!1,position:{x:25,y:50}},{name:"Test",os:"RHEL 7.6",kernel:"3.10.0-957",host:"CTRTFLWC",autoDeploy:!1,position:{x:175,y:50}}]}}]},(M={},Object(q.a)(M,g.c.type,(function(e,t){var n=t.payload;e.pipelines=[].concat(Object(z.a)(e.pipelines),[{title:n.title,chart:{links:[],nodes:[]}}])})),Object(q.a)(M,g.h.type,(function(e,t){var n=t.payload;e.selectedPipeline=n.title})),Object(q.a)(M,g.g.type,(function(e,t){var n=t.payload,a=Object(j.find)(e.pipelines,{title:e.selectedPipeline}).chart;Object(j.find)(a.nodes,{name:n.name}).position=n.position})),Object(q.a)(M,g.e.type,(function(e,t){var n=t.payload,a=Object(j.find)(e.pipelines,{title:e.selectedPipeline}).chart;Object(j.remove)(a.nodes,{name:n.name}),Object(j.remove)(a.links,(function(e){return e.to===n.name||e.from===n.name}))})),Object(q.a)(M,g.d.type,(function(e,t){var n=t.payload,a=Object(j.find)(e.pipelines,{title:e.selectedPipeline}).chart;Object(j.remove)(a.links,{id:n.id})})),Object(q.a)(M,g.b.type,(function(e,t){var n=t.payload;Object(j.find)(e.pipelines,{title:e.selectedPipeline}).chart.nodes.push(n)})),Object(q.a)(M,g.a.type,(function(e,t){var n=t.payload;Object(j.find)(e.pipelines,{title:e.selectedPipeline}).chart.links.push(n)})),Object(q.a)(M,g.f.type,(function(e,t){var n=t.payload,a=Object(j.find)(e.pipelines,{title:e.selectedPipeline}).chart;Object(j.find)(a.nodes,{name:n.selectedNodeName}).autoDeploy=n.checked})),M)),X=Object($.c)([{name:"Dev",os:"RHEL 7.6",kernel:"3.10.0-957",host:"CTRDFLWC",autoDeploy:!1},{name:"Test",os:"RHEL 7.6",kernel:"3.10.0-957",host:"CTRTFLWC",autoDeploy:!1},{name:"Acc",os:"RHEL 7.5",kernel:"3.10.0-862",host:"CTRAFLWC",autoDeploy:!1},{name:"Prod",os:"RHEL 7.6",kernel:"3.10.0-957",host:"CTRPFLWC",autoDeploy:!1}],{}),Y=Object(V.c)({pipeline:Q,environments:X}),Z=Object($.a)({reducer:Y,devTools:!1});r.a.render(o.a.createElement(O.a,{store:Z},o.a.createElement(U.a,{theme:G.a},o.a.createElement(_.a,null),o.a.createElement(B,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/deployment-pipeline",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/deployment-pipeline","/service-worker.js");K?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(t,e)}))}}()},25:function(e,t,n){"use strict";n.d(t,"PipelineContext",(function(){return c}));var a=n(0),o=(n(56),n(95));n.o(o,"setChartProperty")&&n.d(t,"setChartProperty",(function(){return o.setChartProperty})),n.o(o,"usePipeline")&&n.d(t,"usePipeline",(function(){return o.usePipeline})),n.o(o,"validateLink")&&n.d(t,"validateLink",(function(){return o.validateLink}));var i=n(97);n.d(t,"setChartProperty",(function(){return i.b})),n.d(t,"usePipeline",(function(){return i.c}));var r=n(96);n.d(t,"validateLink",(function(){return r.a}));var c=Object(a.createContext)(null)},37:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a={type:"input-output",ports:{port1:{id:"port1",type:"left"},port2:{id:"port2",type:"right"}}},o={scale:1,offset:{x:0,y:0},nodes:{},links:{},selected:{},hovered:{}},i={orientation:0,type:"input-output",ports:{port1:{id:"port1",type:"left",position:{x:0,y:24.5}},port2:{id:"port2",type:"right",position:{x:200,y:24.5}}}}},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(74),o=n(53),i=n(167),r=Object(a.a)({palette:{type:"dark",primary:o.a,secondary:i.a}})},95:function(e,t){},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(6),o=function(e){var t=e.fromNodeId,n=e.fromPortId,o=e.toNodeId,i=e.toPortId,r=e.chart,c={nodeId:t,portId:n},l={nodeId:o,portId:i},p=!(r.nodes[t].ports[n].type===r.nodes[o].ports[i].type),d=Object(a.some)(r.links,(function(e){return e.from.nodeId===l.nodeId})),u=Object(a.some)(r.links,(function(e){return e.to.nodeId===c.nodeId}));return p&&!(d&&u)}},97:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b}));var a=n(12),o=n(45),i=n(16),r=n(14),c=n(13),l=n(6),p=n(0),d=n(15),u=n(37),s=n(11),f=Object(c.b)("setChartProperty",(function(e){return{payload:{nodeId:e.nodeId,name:e.name,value:e.value}}})),m=Object(c.b)("executeChartAction",(function(e){return{payload:{action:e.action}}})),b=function(e){var t,n=Object(d.b)(),b=function(e){return Object(a.a)(Object(a.a)({},u.a),{},{nodes:(n=e.nodes,Object(l.reduce)(n,(function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(i.a)({},t.name,Object(a.a)(Object(a.a)({},u.b),{},{id:t.name,position:t.position,properties:{name:t.name,os:t.os,kernel:t.kernel,host:t.host,autoDeploy:t.autoDeploy}})))}),{})),links:(t=e.links,Object(l.reduce)(t,(function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(i.a)({},t.id,{id:t.id,from:{nodeId:t.from,portId:"port2"},to:{nodeId:t.to,portId:"port1"}}))}),{}))});var t,n}(Object(d.c)((function(t){return Object(l.find)(t.pipeline.pipelines,{title:e}).chart}))),y=Object(c.c)(b,(t={},Object(i.a)(t,m.type,(function(e,t){t.payload.action(e)})),Object(i.a)(t,f.type,(function(e,t){var n=t.payload;e.nodes[n.nodeId].properties[n.name]=n.value})),t)),j=Object(p.useReducer)(y,b),O=Object(o.a)(j,2),v=O[0],h=O[1];return[v,Object(a.a)(Object(a.a)({},Object(l.mapValues)(r.actions,(function(e){return function(){return h(m({action:e.apply(void 0,arguments)}))}}))),function(e,t,n){return{onLinkComplete:function(){var o,i=arguments.length<=0?void 0:arguments[0],c=e.nodes[i.fromNodeId].properties.name,l=e.nodes[i.toNodeId].properties.name,p={from:c,to:l};t(m({action:r.actions.onLinkComplete.apply(r.actions,arguments)})),n(Object(s.a)(p));var d=[Object(a.a)(Object(a.a)({},i),{},{chart:e})],u=(o=i.config).validateLink.apply(o,d);u&&n(Object(s.a)(p))},onDeleteKey:function(){var a=e.selected;if("node"===a.type){var o=e.nodes[a.id].properties.name;n(Object(s.e)(o))}else if("link"===a.type){var i=e.links[a.id],c="".concat(i.from.nodeId,"_").concat(i.to.nodeId);n(Object(s.d)(c))}t(m({action:r.actions.onDeleteKey.apply(r.actions,arguments)}))},onDragNodeStop:function(){var e=arguments.length<=0?void 0:arguments[0],a=e.data,o={x:a.x,y:a.y};n(Object(s.g)(a.node.innerText,o)),t(m({action:r.actions.onDragNodeStop.apply(r.actions,arguments)}))}}}(v,h,n)),h]}}},[[109,1,2]]]);
//# sourceMappingURL=main.bcdbc886.chunk.js.map